<!DOCTYPE html>
<html lang='zh-cn'>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="renderer" content="webkit">
  <title>BUG #138363 【SIT-V3.17.4-P11】【Shipper】【报警中心-报警列表】FTCloud打标后shipper报警详情标题不展示标签 - FT-V3.X - 锐明RDMS</title>
<script>window.config={"webRoot":"\/","debug":true,"appName":"","cookieLife":30,"requestType":"GET","requestFix":"-","moduleVar":"m","methodVar":"f","viewVar":"t","defaultView":"html","themeRoot":"\/theme\/","currentModule":"bug","currentMethod":"view","clientLang":"zh-cn","requiredFields":"","router":"\/index.php","save":"\u4fdd\u5b58","runMode":"","timeout":0,"pingInterval":""};
window.lang={"submitting":"\u7a0d\u5019...","save":"\u4fdd\u5b58","expand":"\u5c55\u5f00\u5168\u90e8","timeout":"\u8fde\u63a5\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u73af\u5883\uff0c\u6216\u91cd\u8bd5\uff01"};

</script>
<script>config.onlybody = "no";</script><link rel='stylesheet' href='/theme/zui/css/min.css?t=1756351508?v=15.5' type='text/css' media='screen' />
<link rel='stylesheet' href='/theme/default/style.css?t=1756351508?v=15.5' type='text/css' media='screen' />
<link rel='stylesheet' href='/theme/lang/zh-cn.css?v=15.5' type='text/css' media='screen' />
<script src='/js/jquery/lib.js?v=15.5'></script>
<script src='/js/zui/min.js?t=1756351508&v=15.5'></script>
<script src='/js/my.full.js?t=1756351508&v=15.5'></script>
<style>.ke-toolbar .ke-outline[data-name='savetemplate'] {display: none;}
#modulemenu .nav #dropMenu #searchResult .closed {text-decoration: none;}
.nav #moreMenus {cursor: pointer;}

#batchCreateForm .input-group, #batchEditForm .input-group,
#batchCreateForm .input-group .form-control, #batchEditForm .input-group .form-control {position: static;}
#batchCreateForm .input-group .colorpicker, #batchEditForm .input-group .colorpicker {z-index: 2;}
#batchCreateForm .input-group .colorpicker.open, #batchEditForm .input-group .colorpicker.open {z-index: 5;}
.warning2{color: #ff5d5d;font-weight: normal}
.content .stepTitle {display: block; color: green; margin: 0px;}
.table-fixed td {white-space: unset;}
.table-data tr > td {word-break: break-all; word-wrap: break-word;}
.side-col .cell {padding: 0px;}
.tab-pane table {border: 1px solid #ddd; border-top: none;}
#legendBasicInfo .thWidth {width: 70px !important;}
#legendLife .thWidth {width: 90px !important;}
</style><link rel='icon' href='/favicon.ico' type='image/x-icon' />
<link rel='shortcut icon' href='/favicon.ico' type='image/x-icon' />
<!--[if lt IE 10]>
<script src='/js/jquery/placeholder/min.js?v=15.5'></script>
<![endif]-->
</head>
<body class=''>
<link rel='stylesheet' href='/js/zui/picker/zui.picker.min.css?v=15.5' type='text/css' media='screen' />
<script src='/js/zui/picker/zui.picker.min.js?v=15.5'></script>
<style>
.picker-single .picker-selection-remove{z-index: 1000;}
.picker-selection-single:after, .picker-multi.picker-focus .picker-selections:before{font-family: ZentaoIcon !important; content: '\f0d7' !important;}
</style>
<script>
var chooseUsersToMail = '选择要发信通知的用户...';
if($.fn.picker)
{
    $(document).ready(function()
    {
        $(".picker-select[data-pickertype!='remote']").picker({chosenMode: true});
        $("[data-pickertype='remote']").each(function()
        {
            var pickerremote = $(this).attr('data-pickerremote');
            $(this).picker({chosenMode: true, remote: pickerremote});
        })
    });
}
</script>
<header id='header'>
  <div id='mainHeader'>
    <div class='container'>
      <div id='heading'>
        <div class='btn-group header-btn'><a href='/index.php?m=bugmarket&f=browse' class='btn' style='padding-top: 2px'><i class='icon icon-cube'></i> 市场缺陷</a>
</div>              </div>
      <nav id='navbar'><ul class='nav nav-default'>
</ul>
</nav>
      <div id='toolbar'>
        <div id='userMenu'>
          <ul id="userNav" class="nav nav-default">
            <li class='dropdown dropdown-hover has-avatar'><a class='dropdown-toggle' data-toggle='dropdown'><div class='avatar has-text avatar-circle'  style='background: hsl(187, 40%, 60%);'><span>J</span></div></a><ul class='dropdown-menu pull-right'><li class="user-profile-item"><a href='/index.php?m=my&f=profile&onlybody=yes' data-width='600' class='iframe '><div class='avatar has-text avatar-circle' id="menu-avatar" style='background: hsl(187, 40%, 60%);'><span>J</span></div><div class="user-profile-name">江原臣</div><div class="user-profile-role">研发主管</div></a></li><li class="divider"></li><li><a href='/index.php?m=my&f=profile&onlybody=yes' class='iframe' data-width='600'><i class='icon icon-account'></i> 个人档案</a>
</li><li><a href='/index.php?m=tutorial&f=start' class='iframe' data-class-name='modal-inverse' data-width='800' data-headerless='true' data-backdrop='true' data-keyboard='true'><i class='icon icon-guide'></i> 新手引导</a>
</li><li><a href='/index.php?m=my&f=preference&onlybody=yes' class='iframe' data-width='650'><i class='icon icon-controls'></i> 个性化设置</a>
</li><li><a href='/index.php?m=my&f=changepassword&onlybody=yes' class='iframe' data-width='600'><i class='icon icon-cog-outline'></i> 修改密码</a>
</li><li class='divider'></li><li class='dropdown-submenu top'><a href='javascript:;'><i class='icon icon-theme'></i> 主题</a><ul class='dropdown-menu pull-left'><li class='selected'><a href='javascript:selectTheme("default");' data-value='default'>禅道蓝（默认）</a></li><li ><a href='javascript:selectTheme("blue");' data-value='blue'>青春蓝</a></li><li ><a href='javascript:selectTheme("green");' data-value='green'>叶兰绿</a></li><li ><a href='javascript:selectTheme("red");' data-value='red'>赤诚红</a></li><li ><a href='javascript:selectTheme("purple");' data-value='purple'>玉烟紫</a></li><li ><a href='javascript:selectTheme("pink");' data-value='pink'>芙蕖粉</a></li><li ><a href='javascript:selectTheme("blackberry");' data-value='blackberry'>露莓黑</a></li><li ><a href='javascript:selectTheme("classic");' data-value='classic'>经典蓝</a></li></ul></li><li class='dropdown-submenu top'><a href='javascript:;'><i class='icon icon-lang'></i> Language</a><ul class='dropdown-menu pull-left'><li class='selected'><a href='javascript:selectLang("zh-cn");'>简体</a></li><li ><a href='javascript:selectLang("zh-tw");'>繁體</a></li><li ><a href='javascript:selectLang("en");'>English</a></li></ul></li><li class='dropdown-submenu'><a data-toggle='dropdown'><i class='icon icon-help'></i> 帮助</a><ul class='dropdown-menu pull-left'><li><a href='https://www.zentao.net/book/zentaopmshelp.html?fullScreen=zentao&theme=default' class='open-in-app' id='helpLink' data-app='help'>手册</a>
</li><li><a href='/index.php?m=misc&f=changeLog' class='iframe' data-width='800' data-headerless='true' data-backdrop='true' data-keyboard='true'>修改日志</a>
</li></ul></li>
<li><a href='/index.php?m=misc&f=about' class='about iframe' data-width='1050' data-headerless='true' data-backdrop='true' data-keyboard='true' data-class='modal-about'><i class='icon icon-about'></i> 关于禅道</a>
</li><li><a href='https://api.zentao.net/goto.php?item=aiux' class='link-aiux' target='_blank'><i class='icon icon-aiux'></i> 艾体验设计</a></li><li class="divider"></li><li><a href='/index.php?m=user&f=logout'  target='_top'><i class='icon icon-exit'></i> 退出</a>
</li></ul></li>
            <li class='dropdown dropdown-hover' id='globalCreate'><a class='dropdown-toggle' data-toggle='dropdown'><i class='icon icon-plus-solid-circle text-secondary'></i></a><ul class='dropdown-menu pull-right create-list'><li><a href='/index.php?m=todo&f=create' ><i class='icon icon-todo'></i> 待办</a>
</li><li class="divider"></li><li><a href='/index.php?m=bug&f=create&productID=43&branch=&extras=from=global' ><i class='icon icon-bug'></i> Bug</a>
</li><li><a href='/index.php?m=story&f=create&productID=43&branch=0&moduleID=0&storyID=0&objectID=0&bugID=0&planID=0&todoID=0&extra=from=global' ><i class='icon icon-lightbulb'></i> 需求</a>
</li><li><a href='/index.php?m=task&f=create&executionID=0&storyID=0&moduleID=0&taskID=0&todoID=0&extra=from=global' ><i class='icon icon-check-sign'></i> 任务</a>
</li><li><a href='/index.php?m=testcase&f=create&productID=43&branch=&moduleID=0&from=&param=0&storyID=0&extras=from=global' ><i class='icon icon-sitemap'></i> 用例</a>
</li><li><a href='/index.php?m=doc&f=selectLibType&objectType=&objectID=0&libID=0&onlybody=yes' class='iframe' data-width='650px'><i class='icon icon-doc'></i> 文档</a>
</li><li class="divider"></li><li><a href='/index.php?m=execution&f=create&projectID=&executionID=0&copyExecutionID=0&planID=0&confirm=no&productID=0&extra=from=global' ><i class='icon icon-run'></i> 执行</a>
</li><li><a href='/index.php?m=project&f=create&model=scrum&programID=0&copyProjectID=0&extra=from=global' ><i class='icon icon-project'></i> 项目</a>
</li></ul></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
    </header>

<script>
adjustMenuWidth();
</script>
<main id='main'  >
  <div class='container'>
<script src='/js/kindeditor/kindeditor.min.js?v=15.5'></script>
<script src='/js/kindeditor/lang/zh_CN.js?v=15.5'></script>
<script>
(function($) {
    var kuid = '68afcc14100a0';
    var editor = {"id":["comment","lastComment"],"tools":"bugTools"};
    var K = KindEditor;

    var bugTools =
    [ 'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic','underline', '|',
    'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist', 'insertunorderedlist', '|',
    'emoticons', 'image', 'code', 'link', '|', 'removeformat','undo', 'redo', 'fullscreen', 'source', 'about'];
    var simpleTools =
    [ 'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic','underline', '|',
    'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist', 'insertunorderedlist', '|',
    'emoticons', 'image', 'code', 'link', 'table', '|', 'removeformat','undo', 'redo', 'fullscreen', 'source', 'about'];
    var fullTools =
    [ 'formatblock', 'fontname', 'fontsize', 'lineheight', '|', 'forecolor', 'hilitecolor', '|', 'bold', 'italic','underline', 'strikethrough', '|',
    'justifyleft', 'justifycenter', 'justifyright', 'justifyfull', '|',
    'insertorderedlist', 'insertunorderedlist', '|',
    'emoticons', 'image', 'insertfile', 'hr', '|', 'link', 'unlink', '/',
    'undo', 'redo', '|', 'selectall', 'cut', 'copy', 'paste', '|', 'plainpaste', 'wordpaste', '|', 'removeformat', 'clearhtml','quickformat', '|',
    'indent', 'outdent', 'subscript', 'superscript', '|',
    'table', 'code', '|', 'pagebreak', 'anchor', '|',
    'fullscreen', 'source', 'preview', 'about'];
    var editorToolsMap = {fullTools: fullTools, simpleTools: simpleTools, bugTools: bugTools};

    /* Kindeditor default options. */
    var editorDefaults =
    {
        cssPath: [config.themeRoot + 'zui/css/min.css'],
        width: '100%',
        height: '200px',
        filterMode: true,
        bodyClass: 'article-content',
        urlType: 'absolute',
        uploadJson: createLink('file', 'ajaxUpload', 'uid=' + kuid),
        langType: 'zh_CN',
        cssData: 'html,body {background: none}.article-content{overflow:visible}.article-content, .article-content table td, .article-content table th {line-height: 1.3846153846; font-size: 13px;}.article-content .table-auto {width: auto!important; max-width: 100%;} ',
        placeholder: "\u53ef\u4ee5\u5728\u7f16\u8f91\u5668\u76f4\u63a5\u8d34\u56fe\u3002",
        placeholderStyle: {fontSize: '13px', color: '#888'},
        pasteImage: {postUrl: createLink('file', 'ajaxPasteImage', 'uid=' + kuid)},
        syncAfterBlur: true,
        allowFileManager: false,
        spellcheck: false
    };

    window.editor = {};

    /* Init kindeditor. */
    var setKindeditor = function(element, options)
    {
        var $editor  = $(element);
        var pasted   = false;
        var editorID = $editor.attr('id');
        options      = $.extend({}, editorDefaults, $editor.data(), options);
        if(editorID === undefined)
        {
            editorID = 'kindeditor-' + $.zui.uuid();
            $editor.attr('id', editorID);
        }

        var editorTool  = editorToolsMap[options.tools || editor.tools] || simpleTools;

        /* Remove fullscreen in modal. */
        if(config.onlybody == 'yes')
        {
            var newEditorTool = new Array();
            for(i in editorTool)
            {
                if(editorTool[i] != 'fullscreen') newEditorTool.push(editorTool[i]);
            }
            editorTool = newEditorTool;
        }

        $.extend(options,
        {
            items: editorTool,
            placeholder: $editor.attr('placeholder') || options.placeholder || '',
            pasteImage: {postUrl: createLink('file', 'ajaxPasteImage', 'uid=' + kuid), placeholder: $editor.attr('placeholder') || "\u53ef\u4ee5\u5728\u7f16\u8f91\u5668\u76f4\u63a5\u8d34\u56fe\u3002"},
        });

        try
        {
            var keditor = K.create('#' + editorID, options);
            window.editor['#'] = window.editor[editorID] = keditor;
            $editor.data('keditor', keditor);
            return keditor;
        }
        catch(e){return false;}
    };

    /* Init kindeditor with jquery way. */
    $.fn.kindeditor = function(options)
    {
        return this.each(function()
        {
            setKindeditor(this, options);
        });
    };

    /* Init all kindeditor. */
    var initKindeditor = function(afterInit)
    {
        var $submitBtn = $('form :input[type=submit]');
        if($submitBtn.length)
        {
            $submitBtn.next('#uid').remove();
            $submitBtn.after("<input type='hidden' id='uid' name='uid' value=" + kuid + ">");
        }
        if($.isFunction(afterInit)) afterInit();
        $.each(editor.id, function(key, editorID)
        {
            setKindeditor('#' + editorID);
        });
    };

    /* Init all kindeditors when document is ready. */
    $(initKindeditor);
}(jQuery));
</script>
<script>sysurl = "https:\/\/rdms.streamax.com";</script>
<script>confirmUnlinkBugcase = "\u60a8\u786e\u8ba4\u79fb\u9664\u8be5\u7528\u4f8b\u5417\uff1f";</script>

<div id="mainMenu" class="clearfix">
  <div class="btn-toolbar pull-left">
        <a href='/index.php?m=my&f=work&mode=bug&type=assignedTo' class='btn btn-secondary'><i class="icon icon-back icon-sm"></i> 返回</a>
    <div class="divider"></div>
        <div class="page-title">
      <span class="label label-id">138363</span>
      <span class="text" title="【SIT-V3.17.4-P11】【Shipper】【报警中心-报警列表】FTCloud打标后shipper报警详情标题不展示标签" style='color: '>【SIT-V3.17.4-P11】【Shipper】【报警中心-报警列表】FTCloud打标后shipper报警详情标题不展示标签</span>
          </div>
  </div>
    <div class="btn-toolbar pull-right">
            <a href='/index.php?m=bug&f=create&productID=43&branch=0&extra=moduleID=84798,projectID=1442,executionID=11580' class='btn btn-primary' data-app='qa'><i class='icon icon-plus'></i> 提Bug</a>
      </div>
  </div>
<div id="mainContent" class="main-row">
  <div class="main-col col-8">
    <div class="cell">
      <div class="detail">
        <div class="detail-title">重现步骤</div>
        <div class="detail-content article-content">
          <p><strong>[环境]</strong><br /><a href='https://test-saas-2166.streamax.com' target='_blank'>https://test-saas-2166.streamax.com</a>:20551/<span></span>&nbsp; &nbsp; &nbsp; <span class="starry-descriptions-item-label" style="color:rgba(0,0,0,0.45);font-family:'-apple-system', BlinkMacSystemFont;"><span class="starry-descriptions-item-label-colon">&nbsp;<span style="color:#000000;">shipper</span></span></span><span class="starry-descriptions-item-content" style="color:#000000;font-family:'-apple-system', BlinkMacSystemFont;">/</span>1qaz2WSX!<br /><strong>[步骤]</strong><br />1、FTCloud处理报警打标签</p>
<p>2、进入shipper查看该报警标题是否展示标签（点击报警处理按钮查看弹窗标签框是否回显）</p>
<p><strong>[期望]</strong></p>
<p>1、正常展示（标签文本框正确回显）</p>
<p><strong>[结果]</strong></p>
<p><img onload="setImageSize(this,0)" src="/index.php?m=file&f=read&t=png&fileID=401724" alt="" /></p>
<p><img onload="setImageSize(this,0)" src="/index.php?m=file&f=read&t=png&fileID=401725" alt="" /></p>
<p><img onload="setImageSize(this,0)" src="/index.php?m=file&f=read&t=png&fileID=401726" alt="" /></p>
<p><span style="color:rgba(0,0,0,0.65);font-family:'-apple-system', BlinkMacSystemFont;"></span></p>        </div>
          <div style="height: 10px"></div>
                                                                            </div>
                </div>
        <div class='cell'><div class="detail histories" id='actionbox'
style="padding: 10px;border-radius: 4px;margin: 0;border: 1px solid #eee;"
data-textDiff="文本格式" data-original="原始格式">
<style>.histories-list > li{word-break: break-word; word-wrap: break-word;}</style>
  <script>
  $(function()
  {
      var diffButton = '<button type="button" class="btn btn-mini btn-icon btn-strip"><i class="icon icon-code icon-sm"></i></button>';
      var newBoxID = '';
      var oldBoxID = '';
      $('blockquote.textdiff').each(function()
      {
          newBoxID = $(this).parent().attr('id');
          if(newBoxID != oldBoxID)
          {
              oldBoxID = newBoxID;
              if($(this).html() != $(this).next().html()) $(this).closest('.history-changes').before(diffButton);
          }
      });
  });
  </script>
    <div class="detail-title">
      历史记录 &nbsp;
    <button type="button" class="btn btn-mini btn-icon btn-reverse" title='切换顺序'>
      <i class="icon icon-arrow-up icon-sm"></i>
    </button>
    <button type="button" class="btn btn-mini btn-icon btn-expand-all" title='切换显示'>
      <i class="icon icon-plus icon-sm"></i>
    </button>
     <button type='button' class='btn btn-link pull-right btn-comment' ><i class="icon icon-chat-line"></i> 添加备注</button><div class="modal fade modal-comment">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><i class="icon icon-close"></i></button>
        <h4 class="modal-title">添加备注</h4>
      </div>
      <div class="modal-body">
        <form class="load-indicator" action="/index.php?m=action&f=comment&objectType=bug&objectID=138363" target='hiddenwin' method='post'>
          <div class="form-group">
            <textarea id='comment' name='comment' class="form-control" rows="8" autofocus="autofocus"></textarea>
          </div>
          <div class="form-group form-actions text-center">
            <button type="submit" class="btn btn-primary btn-wide">保存</button>
            <button type="button" class="btn btn-wide" data-dismiss="modal">关闭</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
$(function()
{
    $body = $('body', window.parent.document);
    if($body.hasClass('hide-modal-close')) $body.removeClass('hide-modal-close');
});
</script>  </div>
      <div class="detail-content">
      <ol class='histories-list'>
                        <li value='1'>
                2025-07-25 17:06:50, 由 <strong>刘庆福</strong> 创建。
                      </li>
                  <li value='2'>
                2025-07-25 17:20:41, 由 <strong>张昌军</strong> 指派给 <strong>江原臣</strong>。
                <button type='button' class='btn btn-mini switch-btn btn-icon btn-expand' title='切换显示'><i class='change-show icon icon-plus icon-sm'></i></button>
        <div class='history-changes' id='changeBox3'>
          修改了 <strong><i>指派给</i></strong>，旧值为 "zhangchangjun"，新值为 "jiangyuanchen"。<br />
        </div>
                      </li>
                  <li value='3'>
                2025-07-26 16:54:37, 由 <strong>江原臣</strong> 确认Bug。
                <button type='button' class='btn btn-mini switch-btn btn-icon btn-expand' title='切换显示'><i class='change-show icon icon-plus icon-sm'></i></button>
        <div class='history-changes' id='changeBox4'>
          修改了 <strong><i>是否确认</i></strong>，旧值为 "0"，新值为 "1"。<br />
        </div>
                      </li>
                  <li value='4'>
                2025-07-26 16:56:16, 由 <strong>江原臣</strong> 解决，方案为 <strong>延期处理</strong> 。                <button type='button' class='btn btn-mini switch-btn btn-icon btn-expand' title='切换显示'><i class='change-show icon icon-plus icon-sm'></i></button>
        <div class='history-changes' id='changeBox5'>
          修改了 <strong><i>解决日期   </i></strong>，旧值为 ""，新值为 "2025-07-26 16:54:40"。<br />
修改了 <strong><i>平台/设备  </i></strong>，旧值为 "web"，新值为 ""。<br />
修改了 <strong><i>Bug归属      </i></strong>，旧值为 "2"，新值为 ""。<br />
修改了 <strong><i>Bug归属团队</i></strong>，旧值为 "3"，新值为 ""。<br />
修改了 <strong><i>解决者      </i></strong>，旧值为 ""，新值为 "jiangyuanchen"。<br />
修改了 <strong><i>解决方案   </i></strong>，区别为：
<blockquote class='textdiff'>001- <del></del><br />
001+ <ins>postponed</ins></blockquote>
<blockquote class='original'>001- <del></del><br />
001+ <ins>postponed</ins></blockquote>        </div>
                                 <button type='button' class='btn btn-link btn-icon btn-sm btn-edit-comment' title='修改备注'><i class="icon icon-pencil"></i></button>        <style>.comment .comment-content{width: 98%}</style>
                <div class='article-content comment'>
          <div class='comment-content'><p>经讨论，<span>3.16.3版本就已经存在这个问题了，</span>该问题可以延期处理。</p>
<p><br /></p></div>
        </div>
                <form method='post' class='comment-edit-form' action='/index.php?m=action&f=editComment&actionID=8945873'>
          <div class="form-group">
          <textarea name='lastComment' id='lastComment' rows='8' autofocus='autofocus'>&lt;p&gt;经讨论，&lt;span&gt;3.16.3版本就已经存在这个问题了，&lt;/span&gt;该问题可以延期处理。&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</textarea>
          </div>
          <div class="form-group form-actions">
           <button type='submit' id='submit' class='btn btn-wide btn-primary'  data-loading='稍候...'>保存</button>           <button type='button' class='btn btn-wide btn-hide-form' >关闭</button>          </div>
        </form>
                      </li>
          </ol>
  </div>
</div>
</div>
        <div class='main-actions'>
      <div class="btn-toolbar">
        <a href='/index.php?m=my&f=work&mode=bug&type=assignedTo' id='back' class='btn' title=返回[快捷键:Alt+↑]><i class="icon-goback icon-back"></i> 返回</a>
                <div class='divider'></div>
        <a href='/index.php?m=bug&f=assignTo&bugID=138363&onlybody=yes' class='btn btn-link iframe'  data-app="bugmarket"><i class='icon-bug-assignTo icon-hand-right'></i> <span class='text'>指派</span></a>
<a href='/index.php?m=bug&f=resolve&bugID=138363&onlybody=yes' class='btn btn-link iframe showinonlybody'  data-app="bugmarket"><i class='icon-bug-resolve icon-checked'></i> <span class='text'>解决</span></a>
<a href='/index.php?m=story&f=create&product=43&branch=0&module=0&story=0&execution=0&bugID=138363' class='btn btn-link ' data-app='bugmarket'><i class='icon-story-create icon-lightbulb'></i> <span class='text'>转产品需求</span></a>
<a href='/index.php?m=testcase&f=create&productID=43&branch=0&moduleID=0&from=bug&bugID=138363' class='btn btn-link '  data-app="bugmarket"><i class='icon-testcase-create icon-sitemap'></i> <span class='text'>建用例</span></a>
<div class='divider'></div><a href='/index.php?m=bug&f=edit&bugID=138363' class='btn btn-link ' title='编辑Bug'  data-app="bugmarket"><i class='icon-common-edit icon-edit'></i></a><a href='/index.php?m=bug&f=create&productID=43&branch=0&extras=bugID=138363' class='btn btn-link ' title='复制Bug'  data-app="bugmarket"><i class='icon-common-copy icon-copy'></i></a>              </div>
    </div>
  </div>
  <div class="side-col col-4">
    <div class="cell">
      <div class='tabs'>
        <ul class='nav nav-tabs'>
          <li class='active'><a href='#legendBasicInfo' data-toggle='tab'>基本信息</a></li>
          <li><a href='#legendExecStoryTask' data-toggle='tab'>项目/迭代/产品需求/任务</a></li>
        </ul>
        <div class='tab-content'>
          <div class='tab-pane active' id='legendBasicInfo'>
            <table class="table table-data">
              <tbody>
                <tr valign='middle'>
                  <th class='thWidth'>所属产品</th>
                  <td><a href='/index.php?m=product&f=browse&productID=43' data-app='product'>FT-V3.X</a>
</td>
                </tr>
                                <tr>
                  <th>所属模块</th>
                                    <td title='海外货运/Shipper/报警中心/报警列表/报警详情'><a href='/index.php?m=bug&f=browse&productID=43&branch=0&browseType=byModule&param=53355'  data-app="bugmarket">海外货运</a>
&nbsp;<i class="icon-angle-right"></i>&nbsp;<a href='/index.php?m=bug&f=browse&productID=43&branch=0&browseType=byModule&param=27966'  data-app="bugmarket">Shipper</a>
&nbsp;<i class="icon-angle-right"></i>&nbsp;<a href='/index.php?m=bug&f=browse&productID=43&branch=0&browseType=byModule&param=27977'  data-app="bugmarket">报警中心</a>
&nbsp;<i class="icon-angle-right"></i>&nbsp;<a href='/index.php?m=bug&f=browse&productID=43&branch=0&browseType=byModule&param=27983'  data-app="bugmarket">报警列表</a>
&nbsp;<i class="icon-angle-right"></i>&nbsp;<a href='/index.php?m=bug&f=browse&productID=43&branch=0&browseType=byModule&param=84798'  data-app="bugmarket">报警详情</a>
</td>
                </tr>
                <tr valign='middle'>
                  <th>所属计划</th>
                  <td></td>
                </tr>
                <tr>
                  <th>Bug类型</th>
                  <td>代码错误</td>
                </tr>
                <tr>
                                    <th>严重程度</th>
                  <td>
                                        <span class='label-severity-custom' data-severity='3' title='一般'>一般</span>
                                      </td>
                </tr>
                <tr>
                  <th>优先级</th>
                  <td><span class='label-pri label-pri-2' title='高'>高</span></td>
                </tr>
                <tr>
                  <th>Bug状态</th>
                  <td><span class='status-bug status-active'>激活</span></td>
                </tr>
                <tr>
                  <th>激活次数</th>
                  <td>0</td>
                </tr>
                <tr>
                  <th>激活日期</th>
                  <td></td>
                </tr>
                <tr>
                  <th>是否确认</th>
                  <td>是</td>
                </tr>
                <tr>
                  <th>当前指派</th>
                  <td>江原臣 于 2025-07-26 16:56:16</td>
                </tr>
                <tr>
                  <th>截止日期</th>
                  <td>
                    0000-00-00                  </td>
                </tr>
                <tr>
                  <th>操作系统</th>
                  <td></td>
                </tr>
                <tr>
                  <th>浏览器</th>
                  <td></td>
                </tr>
                <tr>
                  <th>关键词</th>
                  <td></td>
                </tr>
                <tr>
                  <th>抄送给</th>
                  <td> </td>
                </tr>
                <tr>
                    <th>Bug价值属性</th>
                    <td></td>
                </tr>
                <tr>
                    <th>平台/设备</th>
                    <td></td>
                </tr>
                <tr>
                    <th>Bug归属</th>
                    <td id='attributionBox'></td>
                </tr>
                <tr>
                    <th>Bug归属团队</th>
                    <td id='attributionTeamBox'></td>
                </tr>
                <tr>
                    <th>发生概率</th>
                    <td id='attributionBox'>必现</td>
                </tr>
                <tr valign='middle'>
                    <th class='thWidth'>是否共性问题</th>
                    <td>否</td>
                </tr>
                              </tbody>
            </table>
          </div>
          <div class='tab-pane' id='legendExecStoryTask'>
            <table class='table table-data'>
              <tbody>
                                <tr>
                  <th class='w-70px'>所属项目</th>
                  <td><a href='/index.php?m=project&f=view&projectID=1442' >FT V3基线</a>
</td>
                </tr>
                                <tr>
                  <th class='w-70px'>所属执行</th>
                  <td><a href='/index.php?m=execution&f=browse&executionID=11580' >FT-V3.17.4</a>
</td>
                </tr>
                <tr class='nofixed'>
                  <th>相关需求</th>
                  <td>
                                      </td>
                </tr>
                <tr>
                  <th>相关任务</th>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="cell">
      <div class='tabs'>
        <ul class='nav nav-tabs'>
          <li class='active'><a href='#legendLife' data-toggle='tab'>Bug的一生</a></li>
          <li><a href='#legendMisc' data-toggle='tab'>其他相关</a></li>
        </ul>
        <div class='tab-content'>
          <div class='tab-pane active' id='legendLife'>
            <table class="table table-data">
              <tbody>
                <tr>
                  <th class='thWidth'>由谁创建</th>
                  <td> 刘庆福 于 2025-07-25 17:06:50</td>
                </tr>
                <tr>
                  <th>影响版本</th>
                  <td>
                    FT-V3.X FT-V3.17.4-P11<br />                  </td>
                </tr>
                <tr>
                  <th>由谁解决</th>
                  <td>江原臣 于 2025-07-26 16:54:40</td>
                </tr>
                <tr>
                  <th>解决版本</th>
                  <td></td>
                </tr>
                <tr>
                  <th>解决方案</th>
                  <td>
                    延期处理                  </td>
                </tr>
                <tr>
                  <th>由谁关闭</th>
                  <td></td>
                </tr>
                <tr>
                  <th>最后修改</th>
                  <td>江原臣 于 2025-07-26 16:56:16</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class='tab-pane' id='legendMisc'>
            <table class="table table-data">
              <tbody>
                <tr class='text-top'>
                  <th class='w-80px'>相关Bug</th>
                  <td>
                                      </td>
                </tr>
                
                                <tr>
                    <th class='w-60px'>关联用例</th>
                    <td>
                                            </td>
                </tr>
                
                <!--
                <tr>
                  <th></th>
                  <td>
                                    </td>
                </tr>
                -->                                              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
      </div>
</div>

<div id="mainActions" class='main-actions'>
  <nav class='container'><a href='/index.php?m=bug&f=view&ID=141480#app=bugmarket' id='prevPage' class='btn' title='#141480 【4097】【服务监控日志】app1服务器日志报错 [快捷键:←]'><i class="icon-pre icon-chevron-left"></i></a>
<a href='/index.php?m=bug&f=view&ID=133012#app=bugmarket' id='nextPage' class='btn' title='#133012 【墨西哥自营升级V3.17.5】-【取证中心-报警管理】-导出PDF添加马赛克，没有图片 [快捷键:→]'><i class="icon-pre icon-chevron-right"></i></a>
</nav></div>
<link rel='stylesheet' href='/js/kindeditor/plugins/code/prettify.css?v=15.5' type='text/css' media='screen' />
<script src='/js/kindeditor/plugins/code/prettify.js?v=15.5'></script>
<script>
$(window.prettyPrint);
</script>
</div><script>
$.initSidebar();
</script>

<iframe frameborder='0' name='hiddenwin' id='hiddenwin' scrolling='no' class='debugwin hidden'></iframe>
</main><div id="noticeBox"></div>
<script>
/* Alert got messages. */
needPing = false;
$(function()
{
    var windowBlur = false;
    if(window.Notification)
    {
        window.onblur  = function(){windowBlur = true;}
        window.onfocus = function(){windowBlur = false;}
    }
    setInterval(function()
    {
        $.get(createLink('message', 'ajaxGetMessage', "windowBlur=" + (windowBlur ? '1' : '0')), function(data)
        {
            if(!windowBlur)
            {
                $('#noticeBox').append(data);
                adjustNoticePosition();
            }
            else
            {
                if(data)
                {
                    if(typeof data == 'string') data = $.parseJSON(data);
                    if(typeof data.message == 'string') notifyMessage(data);
                }
            }
        });
    }, 300000);
})

</script>

<script>$(function()
{
    var page = window.page || '';
    var flow = window.flow;
    if(typeof(systemMode) == undefined) var systemMode = '';

    $('#subNavbar a[data-toggle=dropdown]').parent().addClass('dropdown dropdown-hover');

    if(page == 'create' || page == 'edit' || page == 'assignedto' || page == 'confirmbug')
    {
        oldProductID = $('#product').val();
    }

    if(window.flow != 'full')
    {
        $('.querybox-toggle').click(function()
        {
            $(this).parent().toggleClass('active');
        });
    }
});
/**
 * Load all fields.
 *
 * @param  int $productID
 * @access public
 * @return void
 */
function loadAll(productID)
{
    if(page == 'create')
    {
        loadExecutionTeamMembers(productID);
        setAssignedTo();
    }

    if(typeof(changeProductConfirmed) != 'undefined' && !changeProductConfirmed)
    {
        firstChoice = confirm(confirmChangeProduct);
        changeProductConfirmed = true;    // Only notice the user one time.

        if(!firstChoice)
        {
            $('#product').val(oldProductID);//Revert old product id if confirm is no.
            $('#product').trigger("chosen:updated");
            $('#product').chosen();
            return true;
        }

        loadAll(productID);
    }
    else
    {
        $('#taskIdBox').innerHTML = '<select id="task"></select>';  // Reset the task.
        $('#task').chosen();
        loadProductBranches(productID)
        loadProductModules(productID);
        loadProductProjects(productID);
        loadProductBuilds(productID);
        loadProductplans(productID);
        loadProductStories(productID);
        //loadTestTasks(productID);
    }
}

/**
 * Load by branch.
 *
 * @access public
 * @return void
 */
function loadBranch()
{
    $('#taskIdBox').innerHTML = '<select id="task"></select>';  // Reset the task.
    $('#task').chosen();
    productID = $('#product').val();
    loadProductModules(productID);
    loadProductProjects(productID);
    loadProductBuilds(productID);
    loadProductplans(productID);
    loadProductStories(productID);
}

/**
  *Load all builds of one execution or product.
  *
  * @param  object $object
  * @access public
  * @return void
  */
function loadAllBuilds(object)
{
    if(page == 'resolve')
    {
        oldResolvedBuild = $('#resolvedBuild').val() ? $('#resolvedBuild').val() : 0;
        link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=resolvedBuild&build=' + oldResolvedBuild + '&branch=0&index=0&type=all');
        $('#resolvedBuildBox').load(link, function(){$(this).find('select').chosen()});
    }
    else
    {
        productID   = $('#product').val();
        executionID = $('#execution').val();

        var buildBox = '';
        if(page == 'edit') buildBox = $(object).closest('.input-group').attr('id');

        if(executionID)
        {
            loadAllExecutionBuilds(executionID, productID, buildBox);
        }
        else
        {
            loadAllProductBuilds(productID, buildBox);
        }
    }
}

/**
  * Load all builds of the execution.
  *
  * @param  int    $executionID
  * @param  int    $productID
  * @param  string $buildBox
  * @access public
  * @return void
  */
function loadAllExecutionBuilds(executionID, productID, buildBox)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    if(page == 'create')
    {
        oldOpenedBuild = $('#openedBuild').val() ? $('#openedBuild').val() : 0;
        link = createLink('build', 'ajaxGetExecutionBuilds', 'executionID=' + executionID + '&productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + '&branch=' + branch + '&index=0&needCreate=true&type=all');
        $.get(link, function(data)
        {
            if(!data) data = '<select id="openedBuild" name="openedBuild" class="form-control" multiple=multiple></select>';
            $('#openedBuild').replaceWith(data);
            $('#openedBuild_chosen').remove();
            $('#openedBuild').next('.picker').remove();
            $("#openedBuild").chosen();
            notice();
        })
    }
    if(page == 'edit')
    {
        if(buildBox == 'openedBuildBox')
        {
            link = createLink('build', 'ajaxGetExecutionBuilds', 'executionID=' + executionID + '&productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + '&branch=' + branch + '&index=0&needCreate=true&type=all');
            $('#openedBuildBox').load(link, function(){$(this).find('select').chosen()});
        }
        if(buildBox == 'resolvedBuildBox')
        {
            link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=resolvedBuild&build=' + oldResolvedBuild + '&branch=' + branch + '&index=0&type=all');
            $('#resolvedBuildBox').load(link, function(){$(this).find('select').chosen()});
        }
    }
}

/**
  * Load all builds of the product.
  *
  * @param  int    $productID
  * @param  string $buildBox
  * @access public
  * @return void
  */
function loadAllProductBuilds(productID, buildBox)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    if(page == 'create')
    {
        link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + '&branch=' + branch + '&index=0&type=all');
        $.get(link, function(data)
        {
            if(!data) data = '<select id="openedBuild" name="openedBuild" class="form-control" multiple=multiple></select>';
            $('#openedBuild').replaceWith(data);
            $('#openedBuild_chosen').remove();
            $('#openedBuild').next('.picker').remove();
            $("#openedBuild").chosen();
            notice();
        })
    }
    if(page == 'edit')
    {
        if(buildBox == 'openedBuildBox')
        {
            link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + '&branch=' + branch + '&index=0&type=all');
            $('#openedBuildBox').load(link, function(){$(this).find('select').chosen()});
        }
        if(buildBox == 'resolvedBuildBox')
        {
            link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=resolvedBuild&build=' + oldResolvedBuild + '&branch' + branch + '&index=0&type=all');
            $('#resolvedBuildBox').load(link, function(){$(this).find('select').chosen()});
        }
    }
}

/**
 * Load product's modules.
 *
 * @param  int    $productID
 * @access public
 * @return void
 */
function loadProductModules(productID)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    if(typeof(moduleID) == 'undefined') moduleID = 0;
    link = createLink('tree', 'ajaxGetOptionMenu', 'productID=' + productID + '&viewtype=bug&branch=' + branch + '&rootModuleID=0&returnType=html&fieldID=&needManage=true&extra=&currentModuleID=' + moduleID);
    $('#moduleIdBox').load(link, function()
    {
        $(this).find('select').chosen()
        if(typeof(bugModule) == 'string') $('#moduleIdBox').prepend("<span class='input-group-addon' style='border-left-width: 1px;'>" + bugModule + "</span>");
    });
}
/**
 * Load product stories
 *
 * @param  int    $productID
 * @access public
 * @return void
 */
function loadProductStories(productID)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    if(typeof(oldStoryID) == 'undefined') oldStoryID = 0;
    link = createLink('story', 'ajaxGetProductStories', 'productID=' + productID + '&branch=' + branch + '&moduleId=0&storyID=' + oldStoryID);
    $('#storyIdBox').load(link, function(){$('#story').chosen();});
}

/**
 * wandonghao
 * @param attributionID
 */
function loadAttribution(attributionID,attribution2ID){
    if(typeof(attributionID) == 'undefined') attributionID = '';
    if(typeof(attribution2ID) == 'undefined') attribution2ID = '';
    link = createLink('bug', 'ajaxGetAttributions', 'attributionID=' + attributionID+'&attribution2ID=' + attribution2ID);
    $('#attributionBox').load(link, function(){
        $('#attribution2').chosen();
    });
    if($('#attributionTeamBox')){
        getAttributionTeamlink = createLink('bug', 'ajaxGetAttributionTeams', 'attributionID=' + attributionID+'&attribution2ID=' + attribution2ID);
        $('#attributionTeamBox').load(getAttributionTeamlink, function(){
            $('#attributionTeam').chosen();
        });
    }
}
/**
 * Load projects of product.
 *
 * @param  int    $productID
 * @access public
 * @return void
 */
function loadProductProjects(productID)
{
    if(systemMode == 'classic')
    {
        var projectID = $('#execution').find("option:selected").val();
        loadProductExecutions(productID, projectID);
        return true;
    }

    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;

    link = createLink('product', 'ajaxGetProjects', 'productID=' + productID + '&branch=' + branch + '&projectID=' + oldProjectID);
    $('#projectBox').load(link, function()
    {
        $(this).find('select').chosen();
        var projectID = $('#project').find("option:selected").val();
        loadProductExecutions(productID, projectID);
    });
}

/**
 * Load executions of product.
 *
 * @param  int    $productID
 * @param  int    $projectID
 * @access public
 * @return void
 */
function loadProductExecutions(productID, projectID = 0)
{
    required = $('#execution_chosen').hasClass('required');
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;

    link = createLink('product', 'ajaxGetExecutions', 'productID=' + productID + '&projectID=' + projectID + '&branch=' + branch);
    $('#executionIdBox').load(link, function()
    {
        $(this).find('select').chosen();
        if(typeof(bugExecution) == 'string' && systemMode != 'classic') $('#executionIdBox').prepend("<span class='input-group-addon' style='border-left-width: 0px;'>" + bugExecution + "</span>");
        if(required) $(this).addClass('required');
    });
}

/**
 * Load product plans.
 *
 * @param  productID $productID
 * @access public
 * @return void
 */
function loadProductplans(productID)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    link = createLink('productplan', 'ajaxGetProductplans', 'productID=' + productID + '&branch=' + branch);
    $('#planIdBox').load(link, function(){$(this).find('select').chosen()});
}
/**
 * Load product builds.
 *
 * @param  productID $productID
 * @access public
 * @return void
 */
function loadProductBuilds(productID)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    if(typeof(oldOpenedBuild) == 'undefined') oldOpenedBuild = 0;
    link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + '&branch=' + branch);

    if(page == 'create')
    {
        $.get(link, function(data)
        {
            if(!data) data = '<select id="openedBuild" name="openedBuild" class="form-control" multiple=multiple></select>';
            $('#openedBuild').replaceWith(data);
            $('#openedBuild_chosen').remove();
            $('#openedBuild').next('.picker').remove();
            $("#openedBuild").chosen();
            notice();
        })
    }
    else
    {
        $('#openedBuildBox').load(link, function(){$(this).find('select').chosen()});
        link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=resolvedBuild&build=' + oldResolvedBuild + '&branch=' + branch);
        $('#resolvedBuildBox').load(link, function(){$(this).find('select').chosen()});
    }
}

/**
 * Load execution related bugs and tasks.
 *
 * @param  int    $executionID
 * @access public
 * @return void
 */
function loadExecutionRelated(executionID)
{
    executionID = parseInt(executionID);
    if(executionID)
    {
        loadExecutionTasks(executionID);
        loadExecutionStories(executionID);
        loadExecutionBuilds(executionID);
        loadAssignedTo(executionID);
        loadTestTasks($('#product').val(), executionID);
    }
    else
    {
        $('#taskIdBox').innerHTML = '<select id="task"></select>';  // Reset the task.
        loadProductStories($('#product').val());
        loadProductBuilds($('#product').val());
        loadTestTasks($('#product').val());
        loadProjectTeamMembers($('#project').val());
    }
}

/**
 * Load execution tasks.
 *
 * @param  executionID $executionID
 * @access public
 * @return void
 */
function loadExecutionTasks(executionID)
{
    link = createLink('task', 'ajaxGetExecutionTasks', 'executionID=' + executionID + '&taskID=' + oldTaskID);
    $.post(link, function(data)
    {
        if(!data) data = '<select id="task" name="task" class="form-control"></select>';
        $('#task').replaceWith(data);
        $('#task_chosen').remove();
        $('#task').next('.picker').remove();
        $("#task").chosen();
    })
}

/**
 * Load execution stories.
 *
 * @param  executionID $executionID
 * @access public
 * @return void
 */
function loadExecutionStories(executionID)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    if(typeof(oldStoryID) == 'undefined') oldStoryID = 0;
    link = createLink('story', 'ajaxGetExecutionStories', 'executionID=' + executionID + '&productID=' + $('#product').val() + '&branch=' + branch + '&moduleID=0&storyID=' + oldStoryID);
    $('#storyIdBox').load(link, function(){$('#story').chosen();});
}

/**
 * Load builds of a execution.
 *
 * @param  int      $executionID
 * @access public
 * @return void
 */
function loadExecutionBuilds(executionID)
{
    branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    productID = $('#product').val();
    oldOpenedBuild = $('#openedBuild').val() ? $('#openedBuild').val() : 0;

    if(page == 'create')
    {
        link = createLink('build', 'ajaxGetExecutionBuilds', 'executionID=' + executionID + '&productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + "&branch=" + branch + "&index=0&needCreate=true");
        $.get(link, function(data)
        {
            if(!data) data = '<select id="openedBuild" name="openedBuild" class="form-control" multiple=multiple></select>';
            $('#openedBuild').replaceWith(data);
            $('#openedBuild').val(oldOpenedBuild);
            $('#openedBuild_chosen').remove();
            $('#openedBuild').next('.picker').remove();
            $("#openedBuild").chosen();
            notice();
        })
    }
    else
    {
        link = createLink('build', 'ajaxGetExecutionBuilds', 'executionID=' + executionID + '&productID=' + productID + '&varName=openedBuild&build=' + oldOpenedBuild + '&branch=' + branch);
        $('#openedBuildBox').load(link, function(){$(this).find('select').val(oldOpenedBuild).chosen()});

        oldResolvedBuild = $('#resolvedBuild').val() ? $('#resolvedBuild').val() : 0;
        link = createLink('build', 'ajaxGetProductBuilds', 'productID=' + productID + '&varName=resolvedBuild&build=' + oldResolvedBuild + '&branch=' + branch);
        $('#resolvedBuildBox').load(link, function(){$(this).find('select').val(oldResolvedBuild).chosen()});
    }
}

/**
 * Load project members.
 *
 * @param  projectID $projectID
 * @access public
 * @return void
 */
function loadProjectTeamMembers(projectID)
{
    link = createLink('bug', 'ajaxGetProjectTeamMembers', 'projectID=' + projectID);
    $.get(link, function(data)
    {
        if(!data) data = '<select id="assignedTo" name="assignedTo" class="form-control"></select>';
        $('#assignedTo').replaceWith(data);
        $('#assignedTo_chosen').remove();
        $("#assignedTo").chosen();
    });
}

/**
 * Set story field.
 *
 * @param  moduleID $moduleID
 * @param  productID $productID
 * @param  storyID $storyID
 * @access public
 * @return void
 */
function setStories(moduleID, productID, storyID)
{
    var branch = $('#branch').val();
    if(typeof(branch) == 'undefined') branch = 0;
    link = createLink('story', 'ajaxGetProductStories', 'productID=' + productID + '&branch=' + branch + '&moduleID=' + moduleID + '&storyID=' + storyID);
    $.get(link, function(stories)
    {
        if(!stories) stories = '<select id="story" name="story" class="form-control"></select>';
        $('#story').replaceWith(stories);
        $('#story_chosen').remove();
        $('#story').next('.picker').remove();
        $("#story").chosen();
    });
}

/**
 * Load product branches.
 *
 * @param  int $productID
 * @access public
 * @return void
 */
function loadProductBranches(productID)
{
    $('#branch').remove();
    $('#branch_chosen').remove();
    $('#branch').next('.picker').remove();
    $.get(createLink('branch', 'ajaxGetBranches', "productID=" + productID), function(data)
    {
        if(data)
        {
            $('#product').closest('.input-group').append(data);
            $('#branch').css('width', page == 'create' ? '120px' : '65px');
            $('#branch').chosen();
        }
    })
}


var oldAssignedToTitle = $("#assignedTo").find("option:selected").text();
var oldAssignedTo      = $("#assignedTo").find("option:selected").val();

/**
 * Load team members of the execution as assignedTo list.
 *
 * @param  int     $executionID
 * @access public
 * @return void
 */
function loadAssignedTo(executionID, selectedUser)
{
    selectedUser = (typeof(selectedUser) == 'undefined') ? '' : $('#assignedTo').val();
    link = createLink('bug', 'ajaxLoadAssignedTo', 'executionID=' + executionID + '&selectedUser=' + selectedUser);
    $.get(link, function(data)
    {
        var defaultOption = '<option title="' + oldAssignedToTitle + '" value="' + oldAssignedTo + '" selected="selected">' + oldAssignedToTitle + '</option>';
        var defaultAssignedTo = $('#assignedTo').val();

        $('#assignedTo_chosen').remove();
        $('#assignedTo').next('.picker').remove();
        $('#assignedTo').replaceWith(data);

        if(defaultAssignedTo !== oldAssignedTo && selectedUser == '')
        {
            if($('#assignedTo option[value="' + oldAssignedTo + '"]').length > 0) $('#assignedTo option[value="' + oldAssignedTo + '"]').remove();
            $('#assignedTo').append(defaultOption);
        }
        $('#assignedTo').chosen();
    });
}

var oldTestTaskTitle = $("#testtask").find("option:selected").text();
var oldTestTask      = $("#testtask").find("option:selected").val();

/**
 * Load test tasks.
 *
 * @param  int $productID
 * @param  int $executionID
 * @access public
 * @return void
 */
function loadTestTasks(productID, executionID)
{
    if(typeof(executionID) == 'undefined') executionID = 0;
    link = createLink('testtask', 'ajaxGetTestTasks', 'productID=' + productID + '&executionID=' + executionID);
    $.get(link, function(data)
    {
        var defaultOption = '<option title="' + oldTestTaskTitle + '" value="' + oldTestTask + '" selected="selected">' + oldTestTaskTitle + '</option>';
        $('#testtaskBox').html(data);
        $('#testtask').append(defaultOption);
        $('#testtask').chosen();
    });
}

/**
 * notice for create build.
 *
 * @access public
 * @return void
 */
function notice()
{
    $('#buildBoxActions').empty().hide();
    if($('#openedBuild').find('option').length <= 1)
    {
        var html = '';
        if($('#execution').length == 0 || $('#execution').val() == 0)
        {
            var branch = $('#branch').val();
            if(typeof(branch) == 'undefined') branch = 0;
            var link = createLink('release', 'create', 'productID=' + $('#product').val() + '&branch=' + branch);
            if(config.onlybody != 'yes') link += config.requestType == 'GET' ? '&onlybody=yes' : '?onlybody=yes';
            html += '<a href="' + link + '" data-toggle="modal" data-type="iframe" style="padding-right:5px">' + createBuild + '</a> ';
            html += '<a href="javascript:loadProductBuilds(' + $('#product').val() + ')">' + refresh + '</a>';
        }
        else
        {
            executionID = $('#execution').val();
            productID   = $('#product').val();
            projectID   = $('#project').val();
            link = createLink('build', 'create','executionID=' + executionID + '&productID=' + productID + '&projectID=' + projectID);
            link += config.requestType == 'GET' ? '&onlybody=yes' : '?onlybody=yes';
            html += '<a href="' + link + '" data-toggle="modal" data-type="iframe" style="padding-right:5px">' + createBuild + '</a> ';
            html += '<a href="javascript:loadExecutionBuilds(' + executionID + ')">' + refresh + '</a>';
        }
        var $bba = $('#buildBoxActions');
        if($bba.length)
        {
            $bba.html(html);
            $bba.show();
        }
        else
        {
            if($('#buildBox').closest('tr').find('td').size() > 1)
            {
                $('#buildBox').closest('td').next().attr('id', 'buildBoxActions');
                $('#buildBox').closest('td').next().html(html);
            }
            else
            {
                html = "<td id='buildBoxActions'>" + html + '</td>';
                $('#buildBox').closest('td').after(html);
            }
        }
    }
}


function changiscommon(){
    $(".qualityer").hide();
    var iscommon = $("#iscommon").val();
    if (1 == iscommon){
        $(".qualityer").show();
    }else{
        $("#qualityer").val('');
        $("#qualityaffect").val('');
    }
}

</script>
<link rel='stylesheet' href='/theme/default/floating-window.css?v=15.5' type='text/css' media='screen' />
<script src='/js/misc/floatingWindow.js?v=15.5'></script>
</body>
</html>
